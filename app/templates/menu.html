{% extends "base.html" %}

{% block title %}Menu{% endblock %}

{% block page_content %}
    <head>
        <style>
            .menu-item {
                margin-bottom: 20px;
                text-align: center;
                font-weight: bold;
                color: #4CAF50;
            }

            .menu-item img {
                max-width: 100%;
                height: auto;
                width: 200px;
                height: 150px;
            }

            .pagination {
                display: flex;
                justify-content: center;
                list-style: none;
                padding: 0;
            }

            .pagination li {
                margin-right: 10px;
                cursor: pointer;
                font-size: 30px;
                margin-bottom: 10px;
                /* text-decoration: underline; */
                background-color: transparent;
                padding: 1%;
                border-radius: 30%;
                
            }

            .pagination li:hover {
                cursor: pointer;
                color: aliceblue;
                /* font-size: 40px; */
            }

            .pagination :active {
                color: aliceblue;
            }

            .add-to-cart-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            }

            #cart {
                margin-top: 20px;
                text-align: center;
                font-size: large;
            }

            #cart-count {
            font-weight: bold;
            color: red;
            font-size: large;
            
            }

            .notification-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #4CAF50; /* Green background */
            color: white; /* White text */
            text-align: center;
            padding: 16px;
            border-radius: 10px;
            z-index: 1;
            width: 300px;
            max-width: 80%;
            }
            
        </style>
    </head>

    <h1>Restaurant Menu</h1>

    <p>Cart: <span id="cart-count">0</span> items</p>
    

    <div id="menu-list"></div>
    <ul class="pagination" id="pagination">
        <li>1</li>
        <li>2</li>
    </ul>

    

    <div id="notification-popup" class="notification-popup">
        Item has been added
    </div>
    

    <script>
        const menuData = [
            { name: "Appetizer 1", image: "/static/Appetizer-Tortilla-Pinwheels_EXPS_HCA17_8166_B12_15_4b-3.jpg", price: 5.99 },
            { name: "Appetizer 2", image: "/static/Cucumber-Shrimp-Appetizers-Square-1200-1.jpg", price: 5.99 },
            { name: "Main Course 1", image: "/static/Rogan-Josh-1190644860.jpg", price: 5.99 },
            { name: "Main Course 2", image: "/static/SARCIADONG-ISDA-Filipino-fish-dish-IMG2.jpg.webp", price: 5.99 },
            { name: "Dessert 1", image: "/static/tiramisu-dessert-easy-vegan.jpg.webp", price: 5.99 },
            { name: "Dessert 2", image: "/static/easy-no-bake-desserts-645d1b63913ee.jpg", price: 5.99 },
            { name: "Drinks 1", image: "/static/featured-starbucks-pink-drink-recipe.jpg", price: 5.99 },
            { name: "Drinks 2", image: "/static/Strawberry-Water-006.webp", price: 5.99 }
        ];

        const itemsPerPage = 4;
        let currentPage = 1;
        let cartCount = 0;


        function displayMenu(page) {
            const menuList = document.getElementById('menu-list');
            const pagination = document.getElementById('pagination');

            menuList.innerHTML = '';
            pagination.innerHTML = '';

            const startIndex = (page - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const displayedItems = menuData.slice(startIndex, endIndex);

            displayedItems.forEach(item => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';

                const itemImage = document.createElement('img');
                itemImage.src = item.image;
                itemImage.alt = item.name;

                const itemName = document.createElement('p');
                itemName.textContent = `${item.name} - $${item.price}`;

                const addToCartButton = document.createElement('button');
                addToCartButton.textContent = 'Add to Cart';
                addToCartButton.addEventListener('click', () => addToCart(item));

                menuItem.appendChild(itemImage);
                menuItem.appendChild(itemName);
                menuItem.appendChild(addToCartButton);
                menuList.appendChild(menuItem);
            });

            const totalPages = Math.ceil(menuData.length / itemsPerPage);

            for (let i = 1; i <= totalPages; i++) {
                const pageItem = document.createElement('li');
                pageItem.textContent = i;
                pageItem.addEventListener('click', () => onPageClick(i));
                pagination.appendChild(pageItem);
            }
        }

        function onPageClick(page) {
            currentPage = page;
            displayMenu(currentPage);
        }

        function showNotificationPopup() {
            const notificationPopup = document.getElementById('notification-popup');
            notificationPopup.style.display = 'block';

            setTimeout(() => {
                notificationPopup.style.display = 'none';
            }, 2000);
        }

        function addToCart(item) {
            let cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            cartItems.push(item);
            localStorage.setItem('cart', JSON.stringify(cartItems));
            updateCartCount();
            showNotificationPopup();
        }

        function updateCartCount() {
            let cartItems = JSON.parse(localStorage.getItem('cart')) || [];
            cartCount = cartItems.length;
            const cartCountElement = document.getElementById('cart-count');
            cartCountElement.textContent = cartCount.toString();
        }


        displayMenu(currentPage);
        updateCartCount();

    </script>

{% endblock %}